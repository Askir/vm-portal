<table data-toggle="table" class="table" id=<%= id %>>
  <thead>
  <tr>
    <th scope="col" data-sortable="true" class="rounded-left">Status</th>
    <th scope="col" data-sortable="true">Name</th>
    <th scope="col" data-sortable="true">Project</th>
    <th scope="col" data-sortable="true">Responsible</th>
    <% unless buttons.nil? %>
      <th scope="col" class="rounded-right">Actions</th>
    <% end %>
    <th scope="col" class="d-none">Description</th> <!-- This is not intended to be shown, just important for the search functionality -->
  </tr>
  </thead>
  <tbody id="vms">
  <% vms&.slice(0...10)&.each do |vm| %>
    <tr>
      <td class="table-active">
        <p class="d-none"><%= vm.status %></p>
        <div class="round <%= vm.archived? ? 'bg-secondary' : (vm.powered_on? ? 'bg-success' : 'bg-danger') %>"
             title="<%= vm.status %>">
        </div>
      </td>
      <td class="table-active">
        <%= link_to vm.name,
                    {controller: :vms, action: 'show', id: vm.name},
                    method: :get, class: "btn btn-link" %>
      </td>
      <td class="table-active">
        <% if vm.project.nil? %>
          No project found!
        <% else %>
          <%= link_to vm.project.name, vm.project %>
        <% end %>
      </td>
      <td class="table-active">
        <% if vm.responsible_users.empty? %>
          No responsible users found!
        <% else %>
          <ul class="list-unstyled">
            <% vm.responsible_users.each do |user| %>
              <li><%= link_to user.name, user %></li>
            <% end %>
          </ul>
        <% end %>
      </td>
      <% unless buttons.nil? %>
        <td class="table-active">
          <%= render buttons.to_s, vm: vm %>
        </td>
      <% end %>
      <td class="d-none"> <!-- Also not intended to be shown! -->
        <%= vm.config&.description %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>