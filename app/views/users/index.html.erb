<h1>Users</h1>

<table class="table">
  <thead>
    <th><%= User.human_attribute_name('name') %></th>
    <th><%= User.human_attribute_name('email') %></th>
    <% if current_user.admin? %>
      <th><%= User.human_attribute_name('role') %></th>
    <% end %>
    <th><%= User.human_attribute_name('last_sign_in_at') %></th>
    <th></th>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= link_to user.name, user_path(user) %></td>
        <td><%= user.email %></td>
        <% if current_user.admin? %>
          <td>
            <div class="btn-group" role="group">
              <%= button_to 'User',
                            update_role_user_path(user, role: 'user'),
                            method: :patch,
                            id: "btn-user-#{user.id}",
                            class: "btn btn-primary #{'active' if user.user?}"
              %>
              <%= button_to 'Employee',
                            update_role_user_path(user, role: 'employee'),
                            method: :patch,
                            id: "btn-employee-#{user.id}",
                            class: "btn btn-primary #{'active' if user.employee?}"
              %>
              <%= button_to 'Admin',
                            update_role_user_path(user, role: 'admin'),
                            method: :patch,
                            id: "btn-admin-#{user.id}",
                            class: "btn btn-primary #{'active' if user.admin?}"
              %>
            </div>
          </td>
        <% end %>
        <td><%= user.current_sign_in_at %></td>
      </tr>
    <% end %>
  </tbody>
</table>
