<p id="notice"><%= notice %></p>

<h1>Requests</h1>

<table class="table table-fixed-columns">
  <thead>
    <tr>
      <th>Name</th>
      <th>Cpu-Cores</th>
      <th>MB RAM</th>
      <th>MB Storage</th>
      <th>Operating system</th>
      <th class="w-25">Comment</th>
      <th>Status </th>
      <th>Puppet Script</th>
    </tr>
  </thead>

  <tbody>
    <% @requests.each do |request| %>
      <tr>
        <td><%= link_to "#{request.name}", request %></td>
        <td><%= request.cpu_cores %></td>
        <td><%= request.ram_mb %></td>
        <td><%= request.storage_mb %></td>
        <td><%= request.operating_system %></td>
        <td><%= request.comment %></td>
        <td><%= request.status %></td>
        <%if request.accepted? %>
          <td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#puppet-script">
            show script
          </button></td>
          <div class="modal fade" id="puppet-script" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="puppet-scriptTite">Puppet Script</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <pre>
                  <%= create_puppet_script(request).gsub('\n', '<br />').lstrip().rstrip() %>
                  </pre>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        <%else %>
          <td></td>
        <%end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Request', new_request_path, class: 'btn btn-primary' %>