<table class="table" data-toggle="datatable">
  <thead>
    <th>Name</th>
    <th>Description</th>
    <th>Responsible</th>
    <th>Actions</th>
  </thead>
  <tbody>
  <% projects.each do |project| %>
    <tr>
      <td><%= link_to project.name, project_path(project) %></td>
      <td><%= truncate(project.description, length:100) %></td>
      <td>
        <%# https://getbootstrap.com/docs/4.0/content/typography/#inline %>
        <ul class="list-inline">
          <% project.responsible_users.each do |user| %>
            <li class="list-inline-item"><%= link_to user.name, user %></li>
          <% end %>
        </ul>
      </td>
      <td>
        <% if project.responsible_users.include? current_user %>
          <%= link_to fa_icon('trash'),
                      { controller: :projects,
                        action: 'destroy', id: project.id},
                        method: :delete,
                        data: {confirm: "Are you sure that you want to delete this project?\nThe following VMs will loose their project:\n" + project.virtual_machine_configs.map(&:name).join(",")},
                        class: "btn btn-danger" %>
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>